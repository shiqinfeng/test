<html>
<head>
  <title>Date、Calendar、XMLGregorianCalendar、String等类日期格式的转换</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/601302 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="5255"/>
<h1>Date、Calendar、XMLGregorianCalendar、String等类日期格式的转换</h1>

<div>
<span><div><a href="https://blog.csdn.net/chao821/article/details/80868820">https://blog.csdn.net/chao821/article/details/80868820</a></div><div>在java中，常见的表示日期的类主要有以下四种：Date、Calendar、XMLGregorianCalendar、String。现在对上述类的使用进行简单介绍：</div><div>1、Date类：</div><div>Date date=new Date(time);其中time参数（毫秒值）可以不传，表示获取当前时间</div><div>该类的getTime()可以获取到一个long类型的毫秒值。在开发过程中，通常很多人都习惯使用new Date()来获取当前时间。new Date()所做的事情其实就是调用了System.currentTimeMillis()。如果仅仅是需要或者毫秒数，那么完全可以使用System.currentTimeMillis()去代替new Date()，效率上会高一点。</div><div>2、Calendar类：</div><div>该类是一个抽象类，不能通过new方法来获得实例，对此，Calendar提供了一个类方法getInstance()，以此获得该类的一个通用对象。我们可以使用Calendar类获取日期数据的特定部分，如小时，日等，Calendar类的功能要比Date类强大得多。</div><div>Calendar now = Calendar.getInstance();</div><div>以下是 Calendar类的常用方法：</div><div><br/></div><div>package com.test.calendar;</div><div><br/></div><div><br/></div><div>import java.util.Calendar;</div><div><br/></div><div><br/></div><div>import org.junit.Before;</div><div><br/></div><div>import org.junit.Test;</div><div><br/></div><div><br/></div><div>public class CalendarDemo {</div><div><br/></div><div>    Calendar calendar = null;</div><div><br/></div><div><br/></div><div>    @Before</div><div><br/></div><div>    public void test() {</div><div><br/></div><div>        calendar = Calendar.getInstance();</div><div><br/></div><div>    }</div><div><br/></div><div><br/></div><div>    // 基本用法，获取年月日时分秒星期</div><div><br/></div><div>    @Test</div><div><br/></div><div>    public void test1() {</div><div><br/></div><div>        // 获取年</div><div><br/></div><div>        int year = calendar.get(Calendar.YEAR);</div><div><br/></div><div><br/></div><div>        // 获取月，这里需要需要月份的范围为0~11，因此获取月份的时候需要+1才是当前月份值</div><div><br/></div><div>        int month = calendar.get(Calendar.MONTH) + 1;</div><div><br/></div><div><br/></div><div>        // 获取日</div><div><br/></div><div>        int day = calendar.get(Calendar.DAY_OF_MONTH);</div><div><br/></div><div><br/></div><div>        // 获取时</div><div><br/></div><div>        int hour = calendar.get(Calendar.HOUR);</div><div><br/></div><div>        // int hour = calendar.get(Calendar.HOUR_OF_DAY); // 24小时表示</div><div><br/></div><div><br/></div><div>        // 获取分</div><div><br/></div><div>        int minute = calendar.get(Calendar.MINUTE);</div><div><br/></div><div><br/></div><div>        // 获取秒</div><div><br/></div><div>        int second = calendar.get(Calendar.SECOND);</div><div><br/></div><div><br/></div><div>        // 星期，英语国家星期从星期日开始计算</div><div><br/></div><div>        int weekday = calendar.get(Calendar.DAY_OF_WEEK);</div><div><br/></div><div><br/></div><div>        System.out.println(&quot;现在是&quot; + year + &quot;年&quot; + month + &quot;月&quot; + day + &quot;日&quot; + hour</div><div><br/></div><div>                + &quot;时&quot; + minute + &quot;分&quot; + second + &quot;秒&quot; + &quot;星期&quot; + weekday);</div><div><br/></div><div>    }</div><div><br/></div><div><br/></div><div>    // 一年后的今天</div><div><br/></div><div>    @Test</div><div><br/></div><div>    public void test2() {</div><div><br/></div><div>        // 同理换成下个月的今天calendar.add(Calendar.MONTH, 1);</div><div><br/></div><div>        calendar.add(Calendar.YEAR, 1);</div><div><br/></div><div><br/></div><div>        // 获取年</div><div><br/></div><div>        int year = calendar.get(Calendar.YEAR);</div><div><br/></div><div><br/></div><div>        // 获取月</div><div><br/></div><div>        int month = calendar.get(Calendar.MONTH) + 1;</div><div><br/></div><div><br/></div><div>        // 获取日</div><div><br/></div><div>        int day = calendar.get(Calendar.DAY_OF_MONTH);</div><div><br/></div><div><br/></div><div>        System.out.println(&quot;一年后的今天：&quot; + year + &quot;年&quot; + month + &quot;月&quot; + day + &quot;日&quot;);</div><div><br/></div><div>    }</div><div><br/></div><div><br/></div><div>    // 获取任意一个月的最后一天</div><div><br/></div><div>    @Test</div><div><br/></div><div>    public void test3() {</div><div><br/></div><div>        // 假设求6月的最后一天</div><div><br/></div><div>        int currentMonth = 6;</div><div><br/></div><div>        // 先求出7月份的第一天，实际中这里6为外部传递进来的currentMonth变量</div><div><br/></div><div>        // 1</div><div><br/></div><div>        calendar.set(calendar.get(Calendar.YEAR), currentMonth, 1);</div><div><br/></div><div><br/></div><div>        calendar.add(Calendar.DATE, -1);</div><div><br/></div><div><br/></div><div>        // 获取日</div><div><br/></div><div>        int day = calendar.get(Calendar.DAY_OF_MONTH);</div><div><br/></div><div><br/></div><div>        System.out.println(&quot;6月份的最后一天为&quot; + day + &quot;号&quot;);</div><div><br/></div><div>    }</div><div><br/></div><div><br/></div><div>    // 设置日期</div><div><br/></div><div>    @Test</div><div><br/></div><div>    public void test4() {</div><div><br/></div><div>        calendar.set(Calendar.YEAR, 2000);</div><div><br/></div><div>        System.out.println(&quot;现在是&quot; + calendar.get(Calendar.YEAR) + &quot;年&quot;);</div><div><br/></div><div><br/></div><div>        calendar.set(2008, 8, 8);</div><div><br/></div><div>        // 获取年</div><div><br/></div><div>        int year = calendar.get(Calendar.YEAR);</div><div><br/></div><div><br/></div><div>        // 获取月</div><div><br/></div><div>        int month = calendar.get(Calendar.MONTH);</div><div><br/></div><div><br/></div><div>        // 获取日</div><div><br/></div><div>        int day = calendar.get(Calendar.DAY_OF_MONTH);</div><div><br/></div><div><br/></div><div>        System.out.println(&quot;现在是&quot; + year + &quot;年&quot; + month + &quot;月&quot; + day + &quot;日&quot;);</div><div><br/></div><div>    }</div><div><br/></div><div>}</div><div>3、XMLGregorianCalendar类</div><div>    该类表示XML格式日期即ISO日期，如：“2017-12-10T23:34:46”。而我们常用的UTC日期格式为：“2017-12-10 23:34:46”。</div><div>4、String类（不介绍了）</div><div>以下是上述表示时间的类的转换方式：</div><div><br/></div><div>//字符串时间格式转Date格式</div><div><br/></div><div>private Date strToDateLong(String strDate) {</div><div><br/></div><div>    SimpleDateFormat formatter = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);</div><div><br/></div><div>    ParsePosition pos = new ParsePosition(0);</div><div><br/></div><div>    Date strtodate = formatter.parse(strDate, pos);</div><div><br/></div><div>    return strtodate;</div><div><br/></div><div>}</div><div><br/></div><div><br/></div><div><br/></div><div>//Date时间格式转XMLGregorianCalendar格式</div><div><br/></div><div>private XMLGregorianCalendar convertToXMLGregorianCalendar(Date date){  </div><div><br/></div><div>    GregorianCalendar cal = new GregorianCalendar();  </div><div><br/></div><div>        cal.setTime(date);  </div><div><br/></div><div>        XMLGregorianCalendar gc = null;  </div><div><br/></div><div>        try {  </div><div><br/></div><div>            gc = DatatypeFactory.newInstance().newXMLGregorianCalendar(cal);  </div><div><br/></div><div>        } catch (Exception e) {  </div><div><br/></div><div>             e.printStackTrace();  </div><div><br/></div><div>        }  </div><div><br/></div><div>    return gc;  </div><div><br/></div><div>}</div><div><br/></div><div><br/></div><div><br/></div><div>//UTC日期转换为ISO日期</div><div><br/></div><div>public Date DateToXML(XMLGregorianCalendar gc){</div><div><br/></div><div>    GregorianCalendar ca = gc.toGregorianCalendar();</div><div><br/></div><div>           return ca.getTime();</div><div><br/></div><div>}</div><div><br/></div><div><br/></div><div><font style="font-size: 10pt;"><br/></font></div></span>
</div></body></html> 