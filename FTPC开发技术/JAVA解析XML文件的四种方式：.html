<html>
<head>
  <title>JAVA解析XML文件的四种方式：</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/601302 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="5351"/>
<h1>JAVA解析XML文件的四种方式：</h1>

<div>
<span><div>——————————————————————————————————+++++++++++++++++++++++++++++XML文件++++++++++++++++++++++++++++++++++++++++++++++++</div><div>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</div><div>&lt;bookstore&gt;</div><div>    &lt;book id=&quot;1&quot;&gt;</div><div>        &lt;name&gt;冰与火之歌&lt;/name&gt;</div><div>        &lt;author&gt;乔治马丁&lt;/author&gt;</div><div>        &lt;year&gt;2014&lt;/year&gt;</div><div>        &lt;price&gt;89&lt;/price&gt;</div><div>    &lt;/book&gt;</div><div>    &lt;book id=&quot;2&quot;&gt;</div><div>        &lt;name&gt;安徒生童话&lt;/name&gt;</div><div>        &lt;author&gt;安徒生&lt;/author&gt;</div><div>        &lt;year&gt;2004&lt;/year&gt;</div><div>        &lt;price&gt;77&lt;/price&gt;</div><div>    &lt;/book&gt;</div><div>    &lt;book id=&quot;3&quot;&gt;</div><div>        &lt;name&gt;think think think&lt;/name&gt;</div><div>        &lt;author&gt;aaa&lt;/author&gt;</div><div>        &lt;year&gt;1997&lt;/year&gt;</div><div>        &lt;price&gt;100&lt;/price&gt;</div><div>    &lt;/book&gt;</div><div>&lt;/bookstore&gt;</div><div>——————————————————————————————————+++++++++++++++++++++++++++++Bean类++++++++++++++++++++++++++++++++++++++++++++++++</div><div>public class Book {</div><div><br/></div><div>    /**</div><div>     * @author lune</div><div>     */</div><div><br/></div><div>    private int id;</div><div>    private String name;</div><div>    private String author;</div><div>    private int year;</div><div>    private double price;</div><div><br/></div><div>    /**</div><div>     * @return the id</div><div>     */</div><div>    public int getId() {</div><div>        return id;</div><div>    }</div><div>    /**</div><div>     * @param id the id to set</div><div>     */</div><div>    public void setId(int id) {</div><div>        this.id = id;</div><div>    }</div><div>    /**</div><div>     * @return the name</div><div>     */</div><div>    public String getName() {</div><div>        return name;</div><div>    }</div><div>    /**</div><div>     * @param name the name to set</div><div>     */</div><div>    public void setName(String name) {</div><div>        this.name = name;</div><div>    }</div><div>    /**</div><div>     * @return the author</div><div>     */</div><div>    public String getAuthor() {</div><div>        return author;</div><div>    }</div><div>    /**</div><div>     * @param author the author to set</div><div>     */</div><div>    public void setAuthor(String author) {</div><div>        this.author = author;</div><div>    }</div><div>    /**</div><div>     * @return the year</div><div>     */</div><div>    public int getYear() {</div><div>        return year;</div><div>    }</div><div>    /**</div><div>     * @param year the year to set</div><div>     */</div><div>    public void setYear(int year) {</div><div>        this.year = year;</div><div>    }</div><div>    /**</div><div>     * @return the price</div><div>     */</div><div>    public double getPrice() {</div><div>        return price;</div><div>    }</div><div>    /**</div><div>     * @param price the price to set</div><div>     */</div><div>    public void setPrice(double price) {</div><div>        this.price = price;</div><div>    }</div><div><br/></div><div>    @Override</div><div>    public String toString() {</div><div>        return &quot;Book [id=&quot; + id + &quot;, name=&quot; + name + &quot;, author=&quot; + author + &quot;, year=&quot; + year + &quot;, price=&quot; + price + &quot;]&quot;;</div><div>    }</div><div><br/></div><div>}</div><div><br/></div><div>——————————————————————————————————+++++++++++++++++++++++++++++DOM方式解析XML ++++++++++++++++++++++++++++++++++++++++++++++++</div><div>import java.util.ArrayList;</div><div>import java.util.List;</div><div><br/></div><div>import javax.xml.parsers.DocumentBuilder;</div><div>import javax.xml.parsers.DocumentBuilderFactory;</div><div>import javax.xml.parsers.ParserConfigurationException;</div><div><br/></div><div>import org.w3c.dom.Document;</div><div>import org.w3c.dom.NamedNodeMap;</div><div>import org.w3c.dom.NodeList;</div><div><br/></div><div>import com.lune.bean.Book;</div><div><br/></div><div>/**</div><div>* 用DOM方式读取xml文件</div><div>* @author lune</div><div>*/</div><div>public class ReadxmlByDom {</div><div>    private static DocumentBuilderFactory dbFactory = null;</div><div>    private static DocumentBuilder db = null;</div><div>    private static Document document = null;</div><div>    private static List&lt;Book&gt; books = null;</div><div>    static{</div><div>        try {</div><div>            dbFactory = DocumentBuilderFactory.newInstance();</div><div>            db = dbFactory.newDocumentBuilder();</div><div>        } catch (ParserConfigurationException e) {</div><div>            e.printStackTrace();</div><div>        }</div><div>    }</div><div><br/></div><div>    public static List&lt;Book&gt; getBooks(String fileName) throws Exception{</div><div>        //将给定 URI 的内容解析为一个 XML 文档,并返回Document对象</div><div>        document = db.parse(fileName);</div><div>        //按文档顺序返回包含在文档中且具有给定标记名称的所有 Element 的 NodeList</div><div>        NodeList bookList = document.getElementsByTagName(&quot;book&quot;);</div><div>        books = new ArrayList&lt;Book&gt;();</div><div>        //遍历books</div><div>        for(int i=0;i&lt;bookList.getLength();i++){</div><div>            Book book = new Book();</div><div>            //获取第i个book结点</div><div>            org.w3c.dom.Node node = bookList.item(i);</div><div>            //获取第i个book的所有属性</div><div>            NamedNodeMap namedNodeMap = node.getAttributes();</div><div>            //获取已知名为id的属性值</div><div>            String id = namedNodeMap.getNamedItem(&quot;id&quot;).getTextContent();//System.out.println(id);</div><div>            book.setId(Integer.parseInt(id));</div><div><br/></div><div>            //获取book结点的子节点,包含了Test类型的换行</div><div>            NodeList cList = node.getChildNodes();//System.out.println(cList.getLength());9</div><div><br/></div><div>            //将一个book里面的属性加入数组</div><div>            ArrayList&lt;String&gt; contents = new ArrayList&lt;&gt;();</div><div>            for(int j=1;j&lt;cList.getLength();j+=2){</div><div><br/></div><div>                org.w3c.dom.Node cNode = cList.item(j);</div><div>                String content = cNode.getFirstChild().getTextContent();</div><div>                contents.add(content);</div><div>                //System.out.println(contents);</div><div>            }</div><div><br/></div><div>            book.setName(contents.get(0));</div><div>            book.setAuthor(contents.get(1));</div><div>            book.setYear(Integer.parseInt(contents.get(2)));</div><div>            book.setPrice(Double.parseDouble(contents.get(3)));</div><div>            books.add(book);</div><div>        }</div><div><br/></div><div>        return books;</div><div><br/></div><div>    }</div><div><br/></div><div>    public static void main(String args[]){</div><div>        String fileName = &quot;src/res/books.xml&quot;;</div><div>        try {</div><div>            List&lt;Book&gt; list = ReadxmlByDom.getBooks(fileName);</div><div>            for(Book book :list){</div><div>                System.out.println(book);</div><div>            }</div><div>        } catch (Exception e) {</div><div>            // TODO Auto-generated catch block</div><div>            e.printStackTrace();</div><div>        }</div><div>    }</div><div><br/></div><div>}</div><div><br/></div><div>——————————————————————————————————+++++++++++++++++++++++++++++方法二++++++++++++++++++++++++++++++++++++++++++++++++</div><div>import java.util.ArrayList;</div><div>import java.util.List;</div><div><br/></div><div>import org.xml.sax.Attributes;</div><div>import org.xml.sax.SAXException;</div><div>import org.xml.sax.helpers.DefaultHandler;</div><div><br/></div><div>import com.lune.bean.Book;</div><div><br/></div><div>/**</div><div>* 用SAX解析xml文件时需要的handler</div><div>* @author lune</div><div>*/</div><div>public class SAXParseHandler extends DefaultHandler {</div><div>    private List&lt;Book&gt; list;         //存放解析到的book数组</div><div>    private Book book;               //存放当前解析的book</div><div><br/></div><div>    private String content = null;   //存放当前节点值</div><div><br/></div><div>    /**</div><div>     * 开始解析xml文档时调用此方法</div><div>     */</div><div>    @Override</div><div>    public void startDocument() throws SAXException {</div><div><br/></div><div>        super.startDocument();</div><div>        System.out.println(&quot;开始解析xml文件&quot;);</div><div>        list = new ArrayList&lt;Book&gt;();</div><div>    }</div><div><br/></div><div><br/></div><div><br/></div><div>    /**</div><div>     * 文档解析完成后调用此方法</div><div>     */</div><div>    @Override</div><div>    public void endDocument() throws SAXException {</div><div><br/></div><div>        super.endDocument();</div><div>        System.out.println(&quot;xml文件解析完毕&quot;);</div><div>    }</div><div><br/></div><div><br/></div><div><br/></div><div>    /**</div><div>     * 开始解析节点时调用此方法</div><div>     */</div><div>    @Override</div><div>    public void startElement(String uri, String localName, String qName, Attributes attributes) throws SAXException {</div><div><br/></div><div>        super.startElement(uri, localName, qName, attributes);</div><div><br/></div><div>        //当节点名为book时,获取book的属性id</div><div>        if(qName.equals(&quot;book&quot;)){</div><div>            book = new Book();</div><div>            String id = attributes.getValue(&quot;id&quot;);//System.out.println(&quot;id值为&quot;+id);</div><div>            book.setId(Integer.parseInt(id));</div><div>        }</div><div><br/></div><div>    }</div><div><br/></div><div><br/></div><div>    /**</div><div>     *节点解析完毕时调用此方法</div><div>     *</div><div>     *@param qName 节点名</div><div>     */</div><div>    @Override</div><div>    public void endElement(String uri, String localName, String qName) throws SAXException {</div><div><br/></div><div>        super.endElement(uri, localName, qName);</div><div>        if(qName.equals(&quot;name&quot;)){</div><div>            book.setName(content);</div><div>            //System.out.println(&quot;书名&quot;+content);</div><div>        }else if(qName.equals(&quot;author&quot;)){</div><div>            book.setAuthor(content);</div><div>        //  System.out.println(&quot;作者&quot;+content);</div><div>        }else if(qName.equals(&quot;year&quot;)){</div><div>            book.setYear(Integer.parseInt(content));</div><div>        //  System.out.println(&quot;年份&quot;+content);</div><div>        }else if(qName.equals(&quot;price&quot;)){</div><div>            book.setPrice(Double.parseDouble(content));</div><div>        //  System.out.println(&quot;价格&quot;+content);</div><div>        }else if(qName.equals(&quot;book&quot;)){         //当结束当前book解析时,将该book添加到数组后置为空，方便下一次book赋值</div><div>            list.add(book);</div><div>            book = null;</div><div>        }   </div><div><br/></div><div>    }</div><div><br/></div><div><br/></div><div><br/></div><div>    /**</div><div>     * 此方法用来获取节点的值</div><div>     */</div><div>    @Override</div><div>    public void characters(char[] ch, int start, int length) throws SAXException {</div><div><br/></div><div>        super.characters(ch, start, length);</div><div><br/></div><div>        content = new String(ch, start, length);</div><div>        //收集不为空白的节点值</div><div>//      if(!content.trim().equals(&quot;&quot;)){</div><div>//          System.out.println(&quot;节点值为：&quot;+content);</div><div>//      }</div><div><br/></div><div>    }</div><div><br/></div><div>    public List&lt;Book&gt; getBooks(){</div><div>        return list;</div><div>    }</div><div><br/></div><div>}</div><div><br/></div><div>——————————————————————————————————+++++++++++++++++++++++++++++方法三++++++++++++++++++++++++++++++++++++++++++++++++</div><div>import java.io.FileInputStream;</div><div>import java.io.FileNotFoundException;</div><div>import java.io.IOException;</div><div>import java.util.ArrayList;</div><div>import java.util.List;</div><div><br/></div><div>import org.jdom2.JDOMException;</div><div>import org.jdom2.input.SAXBuilder;</div><div><br/></div><div>import com.lune.bean.Book;</div><div><br/></div><div>import org.jdom2.*;</div><div><br/></div><div>/**</div><div>* 用JDOM方式读取xml文件</div><div>* @author lune</div><div>*/</div><div>public class ReadXMLByJDom {</div><div><br/></div><div>    private List&lt;Book&gt; books = null;</div><div>    private Book book = null;</div><div><br/></div><div>    public List&lt;Book&gt; getBooks(String fileName){</div><div>        SAXBuilder saxBuilder = new SAXBuilder();</div><div>        try {</div><div>            Document document = saxBuilder.build(new FileInputStream(fileName));</div><div>            //获取根节点bookstore</div><div>            Element rootElement = document.getRootElement();</div><div>            //获取根节点的子节点，返回子节点的数组</div><div>            List&lt;Element&gt; bookList = rootElement.getChildren();</div><div>            books = new ArrayList&lt;Book&gt;();</div><div>            for(Element bookElement : bookList){</div><div>                book = new Book();</div><div>                //获取bookElement的属性</div><div>                List&lt;Attribute&gt; bookAttributes = bookElement.getAttributes();</div><div>                for(Attribute attribute : bookAttributes){</div><div>                    if(attribute.getName().equals(&quot;id&quot;)){</div><div>                        String id = attribute.getValue(); //System.out.println(id);</div><div>                        book.setId(Integer.parseInt(id));</div><div>                    }</div><div>                }</div><div>                //获取bookElement的子节点</div><div>                List&lt;Element&gt; children = bookElement.getChildren();</div><div>                for(Element child : children){</div><div>                    if(child.getName().equals(&quot;name&quot;)){</div><div>                        String name = child.getValue();//System.out.println(name);</div><div>                        book.setName(name);</div><div>                    }else if(child.getName().equals(&quot;author&quot;)){</div><div>                        String author = child.getValue();</div><div>                        book.setAuthor(author);//System.out.println(author);</div><div>                    }else if(child.getName().equals(&quot;year&quot;)){</div><div>                        String year = child.getValue();</div><div>                        book.setYear(Integer.parseInt(year));</div><div>                    }else if(child.getName().equals(&quot;price&quot;)){</div><div>                        String price = child.getValue();</div><div>                        book.setPrice(Double.parseDouble(price));</div><div>                    }</div><div><br/></div><div>                }</div><div><br/></div><div>                books.add(book);</div><div>                book = null;</div><div><br/></div><div>            }</div><div><br/></div><div>        } catch (FileNotFoundException e) {</div><div><br/></div><div>            e.printStackTrace();</div><div>        } catch (JDOMException e) {</div><div><br/></div><div>            e.printStackTrace();</div><div>        } catch (IOException e) {</div><div><br/></div><div>            e.printStackTrace();</div><div>        }</div><div><br/></div><div>        return books;</div><div><br/></div><div>    }</div><div><br/></div><div><br/></div><div>    public static void main(String[] args) {</div><div>        // TODO Auto-generated method stub</div><div>        String fileName = &quot;src/res/books.xml&quot;;</div><div>        List&lt;Book&gt; books= new ReadXMLByJDom().getBooks(fileName);</div><div>        for(Book book : books){</div><div>            System.out.println(book);</div><div>        }</div><div>    }</div><div><br/></div><div>}</div><div><br/></div><div>——————————————————————————————————+++++++++++++++++++++++++++++方法四++++++++++++++++++++++++++++++++++++++++++++++++</div><div>import java.io.File;</div><div>import java.util.ArrayList;</div><div>import java.util.Iterator;</div><div>import java.util.List;</div><div><br/></div><div>import org.dom4j.Attribute;</div><div>import org.dom4j.Document;</div><div>import org.dom4j.DocumentException;</div><div>import org.dom4j.Element;</div><div>import org.dom4j.io.SAXReader;</div><div><br/></div><div>import com.lune.bean.Book;</div><div><br/></div><div>/**</div><div>* 用DOM4J方法读取xml文件</div><div>* @author lune</div><div>*/</div><div>public class ReadXMLByDom4j {</div><div><br/></div><div>    private List&lt;Book&gt; bookList = null;</div><div>    private Book book = null;</div><div><br/></div><div>    public List&lt;Book&gt; getBooks(File file){</div><div><br/></div><div>        SAXReader reader = new SAXReader();</div><div>        try {</div><div>            Document document = reader.read(file);</div><div>            Element bookstore = document.getRootElement();</div><div>            Iterator storeit = bookstore.elementIterator();</div><div><br/></div><div>            bookList = new ArrayList&lt;Book&gt;();</div><div>            while(storeit.hasNext()){</div><div><br/></div><div>                book = new Book();</div><div>                Element bookElement = (Element) storeit.next();</div><div>                //遍历bookElement的属性</div><div>                List&lt;Attribute&gt; attributes = bookElement.attributes();</div><div>                for(Attribute attribute : attributes){</div><div>                    if(attribute.getName().equals(&quot;id&quot;)){</div><div>                        String id = attribute.getValue();//System.out.println(id);</div><div>                        book.setId(Integer.parseInt(id));</div><div>                    }</div><div>                }</div><div><br/></div><div>                Iterator bookit = bookElement.elementIterator();</div><div>                while(bookit.hasNext()){</div><div>                    Element child = (Element) bookit.next();</div><div>                    String nodeName = child.getName();</div><div>                    if(nodeName.equals(&quot;name&quot;)){</div><div>                        //System.out.println(child.getStringValue());</div><div>                        String name = child.getStringValue();</div><div>                        book.setName(name);</div><div>                    }else if(nodeName.equals(&quot;author&quot;)){</div><div>                        String author = child.getStringValue();</div><div>                        book.setAuthor(author);</div><div>                    }else if(nodeName.equals(&quot;year&quot;)){</div><div>                        String year = child.getStringValue();</div><div>                        book.setYear(Integer.parseInt(year));</div><div>                    }else if(nodeName.equals(&quot;price&quot;)){</div><div>                        String price = child.getStringValue();</div><div>                        book.setPrice(Double.parseDouble(price));</div><div>                    }</div><div>                }</div><div>                bookList.add(book);</div><div>                book = null;</div><div><br/></div><div>            }</div><div>        } catch (DocumentException e) {</div><div><br/></div><div>            e.printStackTrace();</div><div>        }</div><div><br/></div><div><br/></div><div>        return bookList;</div><div><br/></div><div>    }</div><div><br/></div><div><br/></div><div>    /**</div><div>     * @param args</div><div>     */</div><div>    public static void main(String[] args) {</div><div>        // TODO Auto-generated method stub</div><div>        File file = new File(&quot;src/res/books.xml&quot;);</div><div>        List&lt;Book&gt; bookList = new ReadXMLByDom4j().getBooks(file);</div><div>        for(Book book : bookList){</div><div>            System.out.println(book);</div><div>        }</div><div>    }</div><div><br/></div><div>}</div><div><br/></div><div><br/></div></span>
</div></body></html> 